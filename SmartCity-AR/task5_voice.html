<!DOCTYPE html>
<html>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <!-- we import arjs version without NFT but with marker
    + location based support -->
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>

    <script>
    var markerFound = 0;
    AFRAME.registerComponent('button', {
        init: function ()
        {
          var elem = document.documentElement;
          var marker = document.querySelector("#marker");
          var Audio = document.querySelector("#Audio_Asset");
          var button = document.querySelector("#mutebutton");
          button.hidden = true;
          Audio.pause();

          marker.addEventListener("markerFound", function (evt) {
            markerFound = 1;
            button.hidden = false;
            Audio.play();  // if you want the audio
            // to start immediently on marker detection, uncomment this
          });

          marker.addEventListener("markerLost", function (evt) {
            markerFound = 0;
            Audio.pause();
            button.hidden = true;
          });

        // button for video play/pause
          button.addEventListener("click", function(evt){
            console.log("button clicked")
            if(Audio.muted==true){
              button.innerHTML="Pause";
              Audio.muted=false;
              Audio.play();
            }else{
              button.innerHTML="Play";
              Audio.muted=true;
              Audio.pause();
            }
          });
        },
        tick: function (totalTime, deltaTime)
        {
            var dTime = deltaTime / 1000;
            if (markerFound == 1) {
            }
        }
      });
  </script>
    <body style="margin : 0px; overflow: hidden;">
        <a-scene embedded arjs>
            <a-assets>
                <audio id="Audio_Asset" autoplay="false" loop crossorigin="anonymous" src="assets/StarWarsTheme.mp3" webkit-playsinline playsinline controls muted></audio>
                <a-asset-item id="helmet" src="https://arjs-cors-proxy.herokuapp.com/https://raw.githack.com/KhronosGroup/glTF-Sample-Models/master/2.0/SciFiHelmet/glTF/SciFiHelmet.gltf"></a-asset-item>
            </a-assets>
            <!-- handle hiro marker -->
            <a-marker id="marker" preset="hiro" emitevents="true" button>

                <a-audio src="#Audio_Asset" id="Audio" class="intersectable" width="1" height="1" position="0 0 0" rotation="0 0 0" color="#FFFFFF" transparent=False></a-audio>

                <a-entity position="0 -1 0" scale="0.5 0.5 0.5" gltf-model="#helmet"></a-entity>
            </a-marker>
            <!-- add a camera to the scene that renders the objects for us -->
            <a-entity camera></a-entity>
        </a-scene>
    </body>
</html>
